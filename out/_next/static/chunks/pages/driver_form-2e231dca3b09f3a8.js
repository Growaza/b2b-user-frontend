(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[826],{3238:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/driver_form",function(){return n(4221)}])},6691:function(e,r,n){"use strict";var i=n(5893),t=(n(7294),n(3950)),a=n(7161);function o(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}r.Z=function(e){var r=e.notify,n=e.setNotify,s=function(e,i){"clickaway"!==i&&n(function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(r){o(e,r,n[r])}))}return e}({},r,{isOpen:!1}))};return(0,i.jsx)(t.Z,{open:r.isOpen,autoHideDuration:3e3,anchorOrigin:{vertical:"top",horizontal:"right"},onClose:s,children:(0,i.jsx)(a.Z,{severity:r.type,variant:"filled",onClose:s,children:r.message})})}},3738:function(e,r,n){"use strict";n.d(r,{i:function(){return l}});var i=n(5893),t=n(7294),a=n(1163);function o(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function s(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(r){o(e,r,n[r])}))}return e}var l=function(e){return function(r){var n=(0,a.useRouter)();return(0,t.useEffect)((function(){var e=JSON.parse(localStorage.getItem("user"));if(null==(null===e||void 0===e?void 0:e.token))return console.log(e,"token"),n.push("/login");console.log("")}),[]),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(e,s({},r))})}}},4545:function(e,r){"use strict";var n=/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/,i=/^\d{10}$/,t={validatePostBookingForm:function(e){var r={},n=e.pick_up,t=e.drop,a=e.date_of_jorney,o=e.pickup_time,s=e.prefer_car,l=e.cost_of_jorney,c=e.commission_of_vendor,m=e.customer_name,u=e.customer_mobile_number;e.is_driver_request_form;return n||(r.pick_up="Please enter pickup location"),t||(r.drop="Please enter drop location"),a||(r.date_of_jorney="Please enter date of jorney"),o||(r.pickup_time="Please select pickup time"),s||(r.prefer_car="Please Enter prefer_car"),l||(r.cost_of_jorney="Please Enter cost of jorney"),c||(r.commission_of_vendor="Please Enter commission of vendor"),m||(r.customer_name="Please Enter customer name"),u||(r.customer_mobile_number="Please Enter customer mobile number"),u&&!i.test(u.trim().toString())&&(r.customer_mobile_number="Please Enter valid customer mobile number"),r},validateContactUsForm:function(e){var r={},t=e.name,a=e.email,o=e.phone_number,s=e.msg;return t||(r.name="Please enter name"),a||(r.email="Please enter email"),a&&!n.test(a.trim().toString())&&(r.email="Please enter valid email"),o||(r.phone_number="Please enter phone number"),o&&!i.test(o.trim().toString())&&(r.phone_number="Please Enter valid phone number"),s||(r.msg="Please enter message"),r},validateFeedbackForm:function(e){var r={},t=e.name,a=e.email,o=e.phone_number,s=e.feedback;return t||(r.name="Please enter name"),a||(r.email="Please enter email"),a&&!n.test(a.trim().toString())&&(r.email="Please enter valid email"),o||(r.phone_number="Please enter phone number"),o&&!i.test(o.trim().toString())&&(r.phone_number="Please Enter valid phone number"),s||(r.feedback="Please enter message"),r},validatePostTestimonialsForm:function(e){var r={},n=e.name,i=e.testimonials;return n||(r.name="Please enter name"),i||(r.testimonials="Please enter testimonials"),r},validateMyProfileForm:function(e){var r={},t=e.first_name,a=e.last_name,o=e.email,s=e.password,l=e.phone_number,c=e.razorpay_account_id,m=e.state,u=e.city,d=e.dob;return t||(r.first_name="Please enter first_name"),a||(r.last_name="Please enter last_name"),o||(r.email="Please enter email"),o&&!n.test(o.trim().toString())&&(r.email="Please enter valid email"),s||(r.password="Please select password"),l||(r.phone_number="Please Enter phone_number"),l&&!i.test(l.trim().toString())&&(r.phone_number="Please Enter valid phone number"),c||(r.razorpay_account_id="Please Enter razorpay_account_id"),m||(r.state="Please Enter state"),u||(r.city="Please Enter city"),d||(r.dob="Please Enter date of birth"),r},validateDriverForm:function(e){var r={},t=e.driver_name,a=e.driver_email,o=e.driver_mobile_number,s=e.driver_licence_number,l=e.driver_vehicle_number;return t||(r.driver_name="Please enter driver name"),a||(r.driver_email="Please enter driver email"),a&&!n.test(a.trim().toString())&&(r.driver_email="Please enter valid email"),o||(r.driver_mobile_number="Please enter driver mobile number"),o&&!i.test(o.trim().toString())&&(r.driver_mobile_number="Please Enter valid driver mobile number"),s||(r.driver_licence_number="Please enter driver licence number"),l||(r.driver_vehicle_number="Please enter driver vehicle number"),r}};r.Z=t},4221:function(e,r,n){"use strict";n.r(r);var i=n(4051),t=n.n(i),a=n(5893),o=n(7294),s=n(811),l=n(6513),c=n(2052),m=n(7650),u=n(7594),d=n(1163),_=n(3738),f=n(6691),v=n(463),p=n(8316),b=n(2853),h=n(4545);function g(e,r,n,i,t,a,o){try{var s=e[a](o),l=s.value}catch(c){return void n(c)}s.done?r(l):Promise.resolve(l).then(i,t)}function y(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function x(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(r){y(e,r,n[r])}))}return e}r.default=(0,_.i)((function(){var e=function(e){for(var r in e)if("confirm_booking_id"!=r&&"payment_link_id"!=r&&"payment_link_reference_id"!=r&&"payment_link_status"!=r&&"razorpay_payment_id"!=r&&"razorpay_signature"!=r&&"postbooking_id"!=r&&(null==e[r]||""==e[r]))return!1;return!0},r=(0,d.useRouter)(),n=(0,o.useState)({confirm_booking_id:"",payment_link_id:"",payment_link_reference_id:"",payment_link_status:"",razorpay_payment_id:"",razorpay_signature:"",postbooking_id:"",driver_name:"",driver_email:"",driver_mobile_number:"",driver_licence_number:"",driver_vehicle_number:""}),i=n[0],_=n[1],j=(0,o.useState)({}),P=j[0],k=j[1],w=(0,o.useState)({isOpen:!1,message:"",type:""}),O=w[0],N=w[1],E=function(){var n,a=(n=t().mark((function n(a){var o;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),console.log(e(i)),o=h.Z.validateDriverForm(i),0!==Object.entries(o).length||o.constructor!==Object){n.next=12;break}if(!(i.driver_email.length<1||i.driver_licence_number.length<1||i.driver_mobile_number.length<1||i.driver_name.length<1||i.driver_vehicle_number.length<1)){n.next=7;break}return N({isOpen:!0,message:"please fill the all the values",type:"error"}),n.abrupt("return");case 7:return n.next=9,v.Z.post("/api/v1/payment/payment-confirm/",i);case 9:return n.sent,N({isOpen:!0,message:"booking successfully completed",type:"success"}),n.abrupt("return",r.push("/ConfirmBooking/"));case 12:k(o);case 13:case"end":return n.stop()}}),n)})),function(){var e=this,r=arguments;return new Promise((function(i,t){var a=n.apply(e,r);function o(e){g(a,i,t,o,s,"next",e)}function s(e){g(a,i,t,o,s,"throw",e)}o(void 0)}))});return function(e){return a.apply(this,arguments)}}(),S=(0,l._)(),z=(0,m.YD)({root:null,rootMargin:"0px",threshold:.2}),Z=z.ref,D=z.inView,C=function(e){console.log(i,"data");var r=e.target,n=r.name,t=r.value;_(x({},i,y({},n,t)))};return(0,o.useEffect)((function(){if(D){var e=window.location.search,r=new URLSearchParams(e),n=r.get("confirm_booking_id"),t=r.get("razorpay_payment_link_id"),a=r.get("razorpay_payment_link_reference_id"),o=r.get("razorpay_payment_link_status"),s=r.get("razorpay_payment_id"),l=r.get("razorpay_signature"),c=r.get("postbooking_id");console.log("postbooking_id",c),_(x({},i,{confirm_booking_id:n,payment_link_id:t,payment_link_reference_id:a,payment_link_status:o,razorpay_payment_id:s,razorpay_signature:l,postbooking_id:c})),S.start("show")}}),[S,D]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.Z,{}),(0,a.jsxs)(c.E.section,{ref:Z,animate:S,initial:"hidden",id:"postBooking",style:{paddingBottom:"20px"},className:"min-h-screen bg-stone-800",children:[(0,a.jsx)("div",{className:"hidden sm:block","aria-hidden":"true",children:(0,a.jsx)("div",{className:"py-5",children:(0,a.jsx)("div",{className:"border-t border-gray-200"})})}),(0,a.jsx)("div",{className:"pt-[8rem] px-[22px] sm:pt-[8rem]",children:(0,a.jsxs)("div",{className:"md:grid md:grid-rows-non md:gap-6 md:justify-center",children:[(0,a.jsx)(c.E.div,{ref:Z,initial:"hidden",variants:(0,s.iR)(.5),animate:S,onChange:function(e){return console.log("Inview:",e)},className:"md:col-span-3 md:text-center",children:(0,a.jsx)("div",{className:"p-3 bg-[#fec601] rounded-3xl sm:px-0",children:(0,a.jsx)("h3",{className:"text-2xl font-semibold ml-1 leading-6 text-gray-900",children:"Driver Detail"})})}),(0,a.jsx)(c.E.div,{ref:Z,initial:"hidden",variants:(0,s.e5)(.5),animate:S,onChange:function(e){return console.log("Inview:",e)},className:"mt-5 md:mt-0 md:col-span-3",children:(0,a.jsx)("form",{children:(0,a.jsxs)("div",{className:"shadow overflow-hidden rounded-sm",children:[(0,a.jsx)("div",{className:"md:w-[600px] px-4 py-5 bg-[#1261A0] sm:p-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-6 gap-6",children:[(0,a.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[(0,a.jsx)(p.Z,{sx:{color:"#fff"},children:"Driver Name"}),(0,a.jsx)(b.Z,{sx:{borderRadius:"6px",color:"#fff"},type:"text",name:"driver_name",id:"driver_name",value:null===i||void 0===i?void 0:i.driver_name,onChange:function(e){return C(e)},fullWidth:!0,error:!(!P||!P.driver_name),helperText:P&&P.driver_name})]}),(0,a.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[(0,a.jsx)(p.Z,{sx:{color:"#fff"},children:"Driver Email"}),(0,a.jsx)(b.Z,{sx:{borderRadius:"6px",color:"#fff"},type:"email",name:"driver_email",id:"driver_email",value:null===i||void 0===i?void 0:i.driver_email,onChange:function(e){return C(e)},fullWidth:!0,error:!(!P||!P.driver_email),helperText:P&&P.driver_email})]}),(0,a.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[(0,a.jsx)(p.Z,{sx:{color:"#fff"},children:"Driver Mobile Number"}),(0,a.jsx)(b.Z,{sx:{borderRadius:"6px",color:"#fff"},type:"text",name:"driver_mobile_number",id:"driver_mobile_number",value:null===i||void 0===i?void 0:i.driver_mobile_number,onChange:function(e){return C(e)},fullWidth:!0,error:!(!P||!P.driver_mobile_number),helperText:P&&P.driver_mobile_number})]}),(0,a.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[(0,a.jsx)(p.Z,{sx:{color:"#fff"},children:"Driver Licence Number"}),(0,a.jsx)(b.Z,{sx:{borderRadius:"6px",color:"#fff"},type:"text",name:"driver_licence_number",id:"driver_licence_number",value:null===i||void 0===i?void 0:i.driver_licence_number,onChange:function(e){return C(e)},fullWidth:!0,error:!(!P||!P.driver_licence_number),helperText:P&&P.driver_licence_number})]}),(0,a.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[(0,a.jsx)(p.Z,{sx:{color:"#fff"},children:"Driver Vehicle Number"}),(0,a.jsx)(b.Z,{sx:{borderRadius:"6px",color:"#fff"},type:"text",name:"driver_vehicle_number",id:"driver_vehicle_number",value:null===i||void 0===i?void 0:i.driver_vehicle_number,onChange:function(e){return C(e)},fullWidth:!0,error:!(!P||!P.driver_vehicle_number),helperText:P&&P.driver_vehicle_number})]})]})}),(0,a.jsx)("div",{className:"px-4 py-3 bg-[#1261A0] text-center sm:px-6",children:(0,a.jsx)("button",{className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-[#fec601] hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:E,children:"Submit"})})]})})})]})})]}),(0,a.jsx)(f.Z,{notify:O,setNotify:N})]})}))}},function(e){e.O(0,[441,522,853,674,568,984,417,774,888,179],(function(){return r=3238,e(e.s=r);var r}));var r=e.O();_N_E=r}]);