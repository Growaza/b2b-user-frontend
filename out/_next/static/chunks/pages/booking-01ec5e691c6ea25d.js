(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[882],{9229:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/booking",function(){return t(2510)}])},6691:function(e,n,t){"use strict";var r=t(5893),i=(t(7294),t(3950)),o=t(7161);function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}n.Z=function(e){var n=e.notify,t=e.setNotify,a=function(e,r){"clickaway"!==r&&t(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){s(e,n,t[n])}))}return e}({},n,{isOpen:!1}))};return(0,r.jsx)(i.Z,{open:n.isOpen,autoHideDuration:3e3,anchorOrigin:{vertical:"top",horizontal:"right"},onClose:a,children:(0,r.jsx)(o.Z,{severity:n.type,variant:"filled",onClose:a,children:n.message})})}},3738:function(e,n,t){"use strict";t.d(n,{i:function(){return l}});var r=t(5893),i=t(7294),o=t(1163);function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){s(e,n,t[n])}))}return e}var l=function(e){return function(n){var t=(0,o.useRouter)();return(0,i.useEffect)((function(){var e=JSON.parse(localStorage.getItem("user"));if(null==(null===e||void 0===e?void 0:e.token))return console.log(e,"token"),t.push("/login");console.log("")}),[]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e,a({},n))})}}},2510:function(e,n,t){"use strict";t.r(n);var r=t(4051),i=t.n(r),o=t(5893),s=t(7294),a=t(6513),l=t(2052),c=t(7650),u=t(811),d=t(7594),f=t(3738),p=t(6691),m=t(463),x=t(4731),v=t(9655),y=t(381),g=t.n(y),h=t(1719),j=t(6697),b=t(2991),Z=t(3334),w=t(1953),O=t(9072),k=t(9837),P=t(9742),_=t(1359),S=t(1448),C=t(9630),E=t(562),N=t(2857),D=t(3769);function I(e,n,t,r,i,o,s){try{var a=e[o](s),l=a.value}catch(c){return void t(c)}a.done?n(l):Promise.resolve(l).then(r,i)}function z(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function s(e){I(o,r,i,s,a,"next",e)}function a(e){I(o,r,i,s,a,"throw",e)}s(void 0)}))}}function B(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function F(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var R=(0,h.ZP)(w.Z)((function(e){var n=e.theme;return B({},n.breakpoints.up("sm"),{borderRight:"1px solid ".concat(n.palette.divider),pr:12})}));(0,h.ZP)((function(e){e.expand;var n=F(e,["expand"]);return(0,o.jsx)(E.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){B(e,n,t[n])}))}return e}({},n))}))((function(e){var n=e.theme;return{transform:e.expand?"rotate(180deg)":"rotate(0deg)",marginLeft:"auto",transition:n.transitions.create("transform",{duration:n.transitions.duration.shortest})}}));n.default=(0,f.i)((function(){var e=(0,s.useState)([]),n=e[0],t=e[1],r=(0,s.useState)({isOpen:!1,message:"",type:""}),f=r[0],y=r[1],h=function(){var e=z(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.Z.get("/api/v1/booking/postbooking/");case 2:n=e.sent,console.log(null===n||void 0===n?void 0:n.data,"data"),t(null===n||void 0===n?void 0:n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=(0,a._)(),I=(0,c.YD)({root:null,rootMargin:"0px",threshold:.2}),B=I.ref,F=I.inView,Y=function(){var e=z(i().mark((function e(n){var t,r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,m.Z.post("api/v1/payment/payment-link-create",{postbooking_id:n});case 3:r=e.sent,console.log(r.data,"NS"),(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.payment_link)?window.open(null===r||void 0===r||null===(o=r.data)||void 0===o?void 0:o.payment_link,"_blank","noopener,noreferrer"):y({isOpen:!0,message:"Something went wring please try again",type:"error"});case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){F&&(h(),E.start("show"))}),[E,F]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.Z,{}),(0,o.jsxs)(l.E.div,{ref:B,animate:E,initial:"hidden",id:"takeBooking",style:{paddingBottom:"20px"},className:"min-h-screen flex flex-col items-center justify-center bg-stone-800",children:[(0,o.jsx)(l.E.div,{ref:B,initial:"hidden",variants:(0,u.pB)(.5),animate:E,onChange:function(e){return console.log("Inview:",e)},className:"w-52 bg-[#fec601] p-2 rounded-2xl mt-40",children:(0,o.jsx)("h2",{className:"text-3xl text-center text-white font-medium underline",children:"All Bookings"})}),(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),(0,o.jsx)(l.E.div,{ref:B,initial:"hidden",variants:(0,u.iR)(.8),animate:E,onChange:function(e){return console.log("Inview:",e)},className:"grid justify-items-center md:grid-cols-3 gap-6",children:null===n||void 0===n?void 0:n.map((function(e,n){return(0,o.jsx)(O.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,o.jsx)(k.Z,{sx:{minWidth:{md:400},mt:3},children:(0,o.jsx)(O.ZP,{container:!0,spacing:6,children:(0,o.jsxs)(O.ZP,{item:!0,xs:12,sm:12,md:12,children:[(0,o.jsx)(P.Z,{sx:{backgroundColor:"#FEC601"},avatar:(0,o.jsx)(x.Z,{sx:{bgcolor:v.Z[500]},"aria-label":"recipe",children:"R"}),title:"Booking No - "+(null===e||void 0===e?void 0:e.id),subheader:"Posted At:"+g()(e.created_at).format("DD MMM YYYY")}),(0,o.jsxs)(_.Z,{sx:{backgroundColor:"#FEC601"},children:[(0,o.jsxs)(O.ZP,{container:!0,sx:{display:"flex",flexDirection:"row",justifyContent:"center",mb:1},children:[(0,o.jsx)(O.ZP,{item:!0,md:5,display:"flex",justifyContent:"center",children:(0,o.jsx)(S.Z,{icon:(0,o.jsx)(D.Z,{fontSize:"small",sx:{color:"#fff !important"}}),label:null===e||void 0===e?void 0:e.pick_up,sx:{backgroundColor:"primary.main",color:"#fff"}})}),(0,o.jsx)(O.ZP,{item:!0,md:2,display:"flex",justifyContent:"center",sx:{mt:"4px"},children:(0,o.jsx)(N.Z,{})}),(0,o.jsx)(O.ZP,{item:!0,md:5,display:"flex",justifyContent:"center",children:(0,o.jsx)(S.Z,{icon:(0,o.jsx)(D.Z,{fontSize:"small",sx:{color:"#fff !important"}}),label:null===e||void 0===e?void 0:e.drop,sx:{backgroundColor:"primary.main",color:"#fff"}})})]}),(0,o.jsxs)(O.ZP,{container:!0,spacing:4,children:[(0,o.jsx)(O.ZP,{item:!0,xs:12,sm:6,children:(0,o.jsxs)(R,{children:[(0,o.jsxs)(w.Z,{sx:{py:1.25,display:"flex",alignItems:"center"},children:[(0,o.jsx)(j.Z,{sx:{color:"primary.main",mr:2.5},fontSize:"small"}),(0,o.jsx)(C.Z,{variant:"body2",children:null===e||void 0===e?void 0:e.prefer_car})]}),(0,o.jsxs)(w.Z,{sx:{py:1,display:"flex",alignItems:"center"},children:[(0,o.jsx)(b.Z,{sx:{color:"primary.main",mr:2.5},fontSize:"small"}),(0,o.jsx)(C.Z,{variant:"body2",children:null===e||void 0===e?void 0:e.date_of_jorney})]})]})}),(0,o.jsxs)(O.ZP,{item:!0,xs:12,sm:6,children:[(0,o.jsxs)(w.Z,{sx:{py:1.25,display:"flex",alignItems:"center"},children:[(0,o.jsx)(Z.Z,{sx:{color:"primary.main",mr:2.5},fontSize:"small"}),(0,o.jsxs)(C.Z,{variant:"body2",children:[null===e||void 0===e?void 0:e.cost_of_jorney," Rs."]})]}),(0,o.jsxs)(w.Z,{sx:{py:1.25,display:"flex",alignItems:"center"},children:[(0,o.jsx)(b.Z,{sx:{color:"primary.main",mr:2.5},fontSize:"small"}),(0,o.jsx)(C.Z,{variant:"body2",children:null===e||void 0===e?void 0:e.pickup_time})]})]})]}),(0,o.jsx)(w.Z,{sx:{mt:2},children:(0,o.jsx)("button",{className:"inline-flex justify-center py-2 px-8 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-[#F44336] hover:bg-[#1976d2] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:function(){return Y(null===e||void 0===e?void 0:e.id)},children:"Accept Booking"})})]})]})})})},n)}))})]}),(0,o.jsx)(p.Z,{notify:f,setNotify:y})]})}))}},function(e){e.O(0,[885,441,522,853,674,568,984,218,417,774,888,179],(function(){return n=9229,e(e.s=n);var n}));var n=e.O();_N_E=n}]);